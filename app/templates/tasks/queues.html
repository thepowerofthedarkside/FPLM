{% extends "base.html" %}
{% block content %}
<h1>Очереди задач</h1>
{% if can_manage %}
<div class="modal-actions">
  <button type="button" onclick="document.getElementById('createQueueModal').showModal()">Создать</button>
</div>
<dialog id="createQueueModal" class="modal">
  <div class="modal-body">
    <div class="modal-header">
      <h3>Создать очередь</h3>
      <form method="dialog"><button type="submit" class="secondary">Закрыть</button></form>
    </div>
    <form method="post" action="/queues" class="grid">
      <div><label>Название</label><input name="name" required></div>
      <div><label>Описание</label><input name="description"></div>
      <div><label><input type="checkbox" name="active" checked> Активна</label></div>
      <div><button type="submit">Создать</button></div>
    </form>
  </div>
</dialog>
{% endif %}

<div class="card table-wrap">
  <table>
    <thead><tr><th>Код</th><th>Название</th><th>Описание</th><th>Статус</th></tr></thead>
    <tbody>
      {% for q in queues %}
      <tr>
        <td>{{ q.code }}</td>
        <td><a href="/queues/{{ q.id }}">{{ q.name }}</a></td>
        <td>{{ q.description or '' }}</td>
        <td>{{ 'Активна' if q.is_active else 'Неактивна' }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
